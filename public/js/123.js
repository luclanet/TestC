(self.webpackChunk=self.webpackChunk||[]).push([[123],{861:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});var s=a(645),o=a.n(s)()((function(t){return t[1]}));o.push([t.id,".modal{background-color:rgba(0,0,0,.5)}img{max-width:100%}",""]);const i=o},123:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var s=a(757),o=a.n(s);function i(t,e,a,s,o,i,r){try{var n=t[i](r),l=n.value}catch(t){return void a(t)}n.done?e(l):Promise.resolve(l).then(s,o)}const r={name:"home",data:function(){return{current_page:1,error:!1,movies:!1,modelOpen:!1,movie:!1}},beforeCreate:function(){var t,e=this;return(t=o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadUser");case 2:!1===e.$store.getters.isLoggedIn&&e.$router.push("login");case 3:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,o){var r=t.apply(e,a);function n(t){i(r,s,o,n,l,"next",t)}function l(t){i(r,s,o,n,l,"throw",t)}n(void 0)}))})()},created:function(){this.loadData(),window.fullDetails=this.fullDetails},methods:{loadData:function(){var t=this;void 0!==this.$route.query.page&&(this.current_page=this.$route.query.page),axios.get("/api/movies?page="+this.current_page).then((function(e){t.movies=e.data.data})).catch((function(e){t.error=e.response.data.msg,t.blockSubmit=!1}))},formatDate:function(t){return(t=t.split("-"))[2]+"/"+t[1]+"/"+t[0]},fullDetails:function(t){var e=this;this.modelOpen=!0,this.movie=!1,axios.get("/api/movie/"+t).then((function(t){e.movie=t.data.data})).catch((function(t){}))},pages:function(t,e){for(var a=[t],s=t;s<e;)a.push(s+=1);return a}},watch:{$route:function(t,e){this.loadData()}}};var n=a(379),l=a.n(n),v=a(861),c={insert:"head",singleton:!1};l()(v.Z,c);v.Z.locals;const d=(0,a(900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[t.$store.getters.isLoggedIn?a("div",[t._v("\n        Welcome "+t._s(t.$store.getters.user.name)+"\n\n        "),t.error?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n            "+t._s(t.error)+"\n        ")]):t._e(),t._v(" "),t.movies?a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.movies.data,(function(e){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",{domProps:{innerHTML:t._s(e.genre.split(",").join("<br>"))}}),t._v(" "),a("td",[t._v(t._s(t.formatDate(e.release_date)))]),t._v(" "),a("td",{staticClass:"renderLink",domProps:{innerHTML:t._s(e.details)}})])})),0)]):t._e(),t._v(" "),a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},t._l(t.pages(1,t.movies.last_page),(function(e){return a("li",{staticClass:"page-item"},[a("router-link",{staticClass:"page-link",attrs:{to:"?page="+e}},[e!=t.current_page?[t._v(t._s(e))]:t._e(),t._v(" "),e==t.current_page?a("b",[t._v(t._s(e))]):t._e()],2)],1)})),0)])]):t._e(),t._v(" "),t.modelOpen?a("div",{staticClass:"modal show",staticStyle:{"padding-right":"16px",display:"block"},attrs:{tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLiveLabel"}},[t._v("Details")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.modelOpen=!1}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[t.movie?t._e():a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar"}})]),t._v(" "),t.movie?a("div",[a("div",{staticClass:"row"},[t.movie.poster_path?a("div",{staticClass:"col-4"},[a("img",{attrs:{src:"https://image.tmdb.org/t/p/w500"+t.movie.poster_path,alt:t.movie.title}})]):t._e(),t._v(" "),a("div",{class:t.movie.poster_path?"col-8":"col-12"},[a("h5",[t._v(t._s(t.movie.title)+" "),a("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.movie.popularity))])]),t._v(" "),0==t.movie.vote_average?a("div",[t._v("Still no votes")]):a("div",[t._v(t._s(t.movie.vote_average)+" over "+t._s(t.movie.vote_count))]),t._v(" "),a("span",{staticClass:"badge badge-info"},[t._v(t._s(t.movie.status))]),t._v(" "),t._l(t.movie.genres,(function(e){return a("span",{staticClass:"badge badge-success"},[t._v(t._s(e.name))])})),t._v(" "),a("p",[t._v(t._s(t.movie.overview))]),t._v(" "),t._l(t.movie.spoken_languages,(function(e){return a("div",[t._v("\n                                    "+t._s(e.english_name)+"\n                                ")])}))],2)])]):t._e()]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.modelOpen=!1}}},[t._v("Close")])])])])]):t._e()])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Genre(s)")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Release Date")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Details")])])])}],!1,null,null,null).exports}}]);